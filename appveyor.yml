version: 5.0.0.{build}
image: Previous Visual Studio 2022
configuration: Release
platform: Any CPU
nuget:
  disable_publish_on_pr: true
build_script:
- ps: dotnet workload install maui macos android ios maccatalyst
- ps: msbuild /t:restore,pack /p:Configuration=Release /p:TargetPlatforms='net7.0-android;net7.0-windows10.0.19041.0;net7.0-maccatalyst;net7.0-ios' /p:IncludeSymbols=true /p:SymbolPackageFormat=snupkg /p:ContinuousIntegrationBuild=true /p:EmbedUntrackedSources=true /p:PublishRepositoryUrl=true /verbosity:minimal
artifacts:
  - path: '**\NLog.*.nupkg'
  - path: '**\NLog.*.snupkg'
deploy:
- provider: NuGet
  api_key:
    secure: ACKSV1ixxNpO+2k8KvNDy6hd9QmR8lkQmKn773ZIIeVpG0ywYUhY4j8LcyykVR1a
  on:
    branch: master
